{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext}from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{AuthContext}from\"../context/authContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Admin=function Admin(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser,logout=_useContext.logout;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),approval_status=_useState4[0],set_approval_status=_useState4[1];var approval_handler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(post){var post_array,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;post_array=[post,currentUser];_context.next=4;return axios.post(\"/postsApproval/updateApprovalStatus\",post_array);case 4:res=_context.sent;set_approval_status(res.data.message);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function approval_handler(_x){return _ref.apply(this,arguments);};}();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/postsApproval\");case 3:res=_context2.sent;console.log(res.data);console.log(\"yess\");setPosts(res.data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);var getText=function getText(html){var doc=new DOMParser().parseFromString(html,\"text/html\");return doc.body.textContent;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"banUser\",children:/*#__PURE__*/_jsx(Link,{to:\"/user\",children:/*#__PURE__*/_jsx(\"p\",{className:\"adminRedirectioncss\",children:\"Ban Users\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"unappPost\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Unapproved Posts\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"home\",children:/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:posts.map(function(post){return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/postApproval/\".concat(post.post_id),children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"title\",children:[post.writer_id,\" \"]}),/*#__PURE__*/_jsx(\"p\",{className:\"content\",children:getText(post.post_content)}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminatagu\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"approv\",children:\"Click to Approve\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"tag\",children:[post.tag2,\" \",post.tag3]})]})]})})},post.post_id);})})})]});};export default Admin;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useLocation","useNavigate","axios","AuthContext","Admin","navigate","posts","setPosts","currentUser","logout","approval_status","set_approval_status","approval_handler","post","post_array","res","data","message","console","log","fetchData","get","getText","html","doc","DOMParser","parseFromString","body","textContent","map","post_id","writer_id","post_content","tag2","tag3"],"sources":["C:/Users/musta/Documents/GitHub/guest_posting/client/src/pages/admin.jsx"],"sourcesContent":["import React ,  { useContext } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Link, useLocation, useNavigate  } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/authContext\";\r\n\r\nconst Admin = () => {\r\n  const navigate = useNavigate();\r\n  const [posts, setPosts] = useState([]);\r\n  \r\n  const { currentUser, logout } = useContext(AuthContext);\r\n  const [approval_status , set_approval_status] = useState(null)\r\n\r\n  const approval_handler = async(post) => {\r\n    try {\r\n      const post_array = [post , currentUser]\r\n      const res = await axios.post(`/postsApproval/updateApprovalStatus` , post_array);\r\n      set_approval_status(res.data.message)\r\n    } catch (err){\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n\r\n      try {\r\n        const res = await axios.get(`/postsApproval`);\r\n        console.log(res.data)\r\n        console.log(\"yess\")\r\n        setPosts(res.data);\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  },[]);\r\n\r\n  const getText = (html) =>{\r\n    const doc = new DOMParser().parseFromString(html, \"text/html\")\r\n    return doc.body.textContent\r\n  }\r\n\r\n  return (\r\n    <div>\r\n        <div className=\"banUser\">\r\n            <Link to=\"/user\"><p className=\"adminRedirectioncss\">Ban Users</p></Link>\r\n        </div>\r\n        <div className=\"unappPost\" >\r\n        <p >Unapproved Posts</p>\r\n        </div>\r\n        <div className=\"home\">\r\n        <div className=\"posts\">\r\n          {posts.map((post) => ( \r\n            <div className=\"post\" key={post.post_id}>\r\n              <div className=\"content\">\r\n                <Link className=\"link\" to={`/postApproval/${post.post_id}`}>\r\n                <h2 className=\"title\">{post.writer_id} </h2>\r\n                <p className=\"content\">{getText(post.post_content)}</p>\r\n                <div className=\"adminatagu\">\r\n                <p className=\"approv\">Click to Approve</p>\r\n                <p className=\"tag\">{post.tag2} {post.tag3}</p>\r\n              </div>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n    \r\n};\r\n\r\nexport default Admin;\r\n"],"mappings":"8aAAA,MAAOA,MAAK,EAAMC,UAAU,KAAQ,OAAO,CAC3C,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,IAAI,CAAEC,WAAW,CAAEC,WAAW,KAAS,kBAAkB,CAClE,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,wBAAwB,CAAC,wFAErD,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB,GAAMC,SAAQ,CAAGJ,WAAW,EAAE,CAC9B,cAA0BH,QAAQ,CAAC,EAAE,CAAC,wCAA/BQ,KAAK,eAAEC,QAAQ,eAEtB,gBAAgCX,UAAU,CAACO,WAAW,CAAC,CAA/CK,WAAW,aAAXA,WAAW,CAAEC,MAAM,aAANA,MAAM,CAC3B,eAAgDX,QAAQ,CAAC,IAAI,CAAC,yCAAvDY,eAAe,eAAGC,mBAAmB,eAE5C,GAAMC,iBAAgB,4FAAG,iBAAMC,IAAI,uJAEzBC,UAAU,CAAG,CAACD,IAAI,CAAGL,WAAW,CAAC,uBACrBN,MAAK,CAACW,IAAI,uCAAyCC,UAAU,CAAC,QAA1EC,GAAG,eACTJ,mBAAmB,CAACI,GAAG,CAACC,IAAI,CAACC,OAAO,CAAC,gFAErCC,OAAO,CAACC,GAAG,aAAK,qEAEnB,kBARKP,iBAAgB,4CAQrB,CAEDf,SAAS,CAAC,UAAM,CACd,GAAMuB,UAAS,6FAAG,0LAGIlB,MAAK,CAACmB,GAAG,kBAAkB,QAAvCN,GAAG,gBACTG,OAAO,CAACC,GAAG,CAACJ,GAAG,CAACC,IAAI,CAAC,CACrBE,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC,CACnBZ,QAAQ,CAACQ,GAAG,CAACC,IAAI,CAAC,CAAC,mFAEnBE,OAAO,CAACC,GAAG,cAAK,uEAEnB,kBAVKC,UAAS,2CAUd,CAEDA,SAAS,EAAE,CACb,CAAC,CAAC,EAAE,CAAC,CAEL,GAAME,QAAO,CAAG,QAAVA,QAAO,CAAIC,IAAI,CAAI,CACvB,GAAMC,IAAG,CAAG,GAAIC,UAAS,EAAE,CAACC,eAAe,CAACH,IAAI,CAAE,WAAW,CAAC,CAC9D,MAAOC,IAAG,CAACG,IAAI,CAACC,WAAW,CAC7B,CAAC,CAED,mBACE,oCACI,YAAK,SAAS,CAAC,SAAS,uBACpB,KAAC,IAAI,EAAC,EAAE,CAAC,OAAO,uBAAC,UAAG,SAAS,CAAC,qBAAqB,uBAAc,EAAO,EACtE,cACN,YAAK,SAAS,CAAC,WAAW,uBAC1B,uCAAwB,EAClB,cACN,YAAK,SAAS,CAAC,MAAM,uBACrB,YAAK,SAAS,CAAC,OAAO,UACnBtB,KAAK,CAACuB,GAAG,CAAC,SAAChB,IAAI,qBACd,YAAK,SAAS,CAAC,MAAM,uBACnB,YAAK,SAAS,CAAC,SAAS,uBACtB,MAAC,IAAI,EAAC,SAAS,CAAC,MAAM,CAAC,EAAE,yBAAmBA,IAAI,CAACiB,OAAO,CAAG,wBAC3D,YAAI,SAAS,CAAC,OAAO,WAAEjB,IAAI,CAACkB,SAAS,OAAO,cAC5C,UAAG,SAAS,CAAC,SAAS,UAAET,OAAO,CAACT,IAAI,CAACmB,YAAY,CAAC,EAAK,cACvD,aAAK,SAAS,CAAC,YAAY,wBAC3B,UAAG,SAAS,CAAC,QAAQ,8BAAqB,cAC1C,WAAG,SAAS,CAAC,KAAK,WAAEnB,IAAI,CAACoB,IAAI,KAAGpB,IAAI,CAACqB,IAAI,GAAK,GAC1C,GACG,EACH,EAVmBrB,IAAI,CAACiB,OAAO,CAWjC,EACP,CAAC,EACE,EACF,GACF,CAGV,CAAC,CAED,cAAe1B,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}