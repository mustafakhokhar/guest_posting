{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext}from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{Link,useLocation}from\"react-router-dom\";import axios from\"axios\";import{AuthContext}from\"../context/authContext\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser,logout=_useContext.logout;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),report_status=_useState4[0],set_report_status=_useState4[1];var Like=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(post){var post_array,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(post);_context.prev=1;// post.totalLikes = post.totalLikes + 1\npost_array=[post,currentUser];_context.next=5;return axios.post(\"/posts/update_like\",post_array);case 5:res=_context.sent;_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(\"err : \",_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function Like(_x){return _ref.apply(this,arguments);};}();var Dis_Like=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(post){var post_array,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(post);_context2.prev=1;// post.totalDislikes = post.totalDislikes + 1\npost_array=[post,currentUser];_context2.next=5;return axios.post(\"/posts/update_dislike\",post_array);case 5:res=_context2.sent;_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(\"err : \",_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function Dis_Like(_x2){return _ref2.apply(this,arguments);};}();var report_handler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(post){var post_array,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;// post.totalLikes = post.totalLikes + 1\npost_array=[post,currentUser];_context3.next=4;return axios.post(\"/posts/update_report_status\",post_array);case 4:res=_context3.sent;set_report_status(res.data.message);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);// set_report_status(err.response.data)\ncase 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function report_handler(_x3){return _ref3.apply(this,arguments);};}();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(\"/posts\");case 3:res=_context4.sent;console.log(res.data);console.log(\"yess\");setPosts(res.data);_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);// setError(err.response.data);\nconsole.log(_context4.t0);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function fetchData(){return _ref4.apply(this,arguments);};}();fetchData();},[]);var getText=function getText(html){var doc=new DOMParser().parseFromString(html,\"text/html\");return doc.body.textContent;};return/*#__PURE__*/_jsx(\"div\",{className:\"home container-bg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:posts.map(function(post){return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/post/\".concat(post.post_id),children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"title\",children:[post.writer_id,\" \"]}),/*#__PURE__*/_jsx(\"p\",{className:\"content\",children:getText(post.post_content)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDC4D\",post.totalLikes,\" \\uD83D\\uDC4E\",post.totalDislikes,\" \\uD83D\\uDCAD\",post.totalComments]}),/*#__PURE__*/_jsxs(\"p\",{className:\"tag\",children:[post.tag2,\" \",post.tag3]})]})]})})},post.post_id);})})});};export default Home;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useLocation","axios","AuthContext","Home","posts","setPosts","currentUser","logout","report_status","set_report_status","Like","post","console","log","post_array","res","Dis_Like","report_handler","data","message","fetchData","get","getText","html","doc","DOMParser","parseFromString","body","textContent","map","post_id","writer_id","post_content","totalLikes","totalDislikes","totalComments","tag2","tag3"],"sources":["C:/Users/musta/Documents/GitHub/guest_posting/client/src/pages/Home.jsx"],"sourcesContent":["import React ,  { useContext } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/authContext\";\r\n\r\nconst Home = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  \r\n  const { currentUser, logout } = useContext(AuthContext);\r\n  const [report_status , set_report_status] = useState(null)\r\n\r\n  const Like = async(post) => \r\n  {\r\n    console.log(post)\r\n    try {\r\n      // post.totalLikes = post.totalLikes + 1\r\n      const post_array = [post , currentUser]\r\n      const res = await axios.post(`/posts/update_like` , post_array);\r\n    } catch (err){\r\n      console.log(\"err : \" , err)\r\n    }\r\n    \r\n  }\r\n\r\n  const Dis_Like = async(post) => \r\n  {\r\n    console.log(post)\r\n    try {\r\n      // post.totalDislikes = post.totalDislikes + 1\r\n      const post_array = [post , currentUser]\r\n      const res = await axios.post(`/posts/update_dislike` , post_array);\r\n    } catch (err){\r\n      console.log(\"err : \" , err)\r\n    }\r\n    \r\n  }\r\n  \r\n  const report_handler = async(post) => {\r\n\r\n    try {\r\n      // post.totalLikes = post.totalLikes + 1\r\n      const post_array = [post , currentUser]\r\n      const res = await axios.post(`/posts/update_report_status` , post_array);\r\n      set_report_status(res.data.message)\r\n    } catch (err){\r\n      \r\n      console.log(err)\r\n      // set_report_status(err.response.data)\r\n\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n\r\n      try {\r\n        const res = await axios.get(`/posts`);\r\n        console.log(res.data)\r\n        console.log(\"yess\")\r\n        setPosts(res.data);\r\n        \r\n      } catch (err) {\r\n        // setError(err.response.data);\r\n        console.log(err)\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  },[]);\r\n\r\n  const getText = (html) =>{\r\n    const doc = new DOMParser().parseFromString(html, \"text/html\")\r\n    return doc.body.textContent\r\n  }\r\n\r\n\r\n  return (\r\n    \r\n    <div className=\"home container-bg\">\r\n      <div className=\"posts\">\r\n        {posts.map((post) => ( \r\n          <div className=\"post\" key={post.post_id}>\r\n            <div className=\"content\">\r\n            <Link className=\"link\" to={`/post/${post.post_id}`}>\r\n              <h2 className=\"title\">{post.writer_id} </h2>\r\n              <p className=\"content\">{getText(post.post_content)}</p>\r\n              <div>\r\n              <p>üëç{post.totalLikes} üëé{post.totalDislikes} üí≠{post.totalComments}</p>\r\n                <p className=\"tag\">{post.tag2} {post.tag3}</p>\r\n              </div>\r\n              </Link>\r\n            </div>\r\n            \r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n    \r\n};\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}