{"ast":null,"code":"import _toConsumableArray from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),search_word=_useState2[0],set_search_k=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),search_array=_useState4[0],set_search_array=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),search_tag=_useState6[0],set_search_t=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),order=_useState8[0],set_sorting_by=_useState8[1];var navigate=useNavigate();var getText=function getText(html){var doc=new DOMParser().parseFromString(html,\"text/html\");return doc.body.textContent;};var searchk=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"THE words are : \",search_word);if(!(search_word.length!=0)){_context.next=12;break;}_context.prev=2;_context.next=5;return axios.get(\"/posts/searchk/\".concat(search_word));case 5:res=_context.sent;set_search_array(res.data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function searchk(){return _ref.apply(this,arguments);};}();var searcht=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(search_tag.length!=0)){_context2.next=12;break;}console.log(\"THE tags are : \",search_tag);_context2.prev=2;_context2.next=5;return axios.get(\"/posts/searcht/\".concat(search_tag));case 5:res=_context2.sent;set_search_array(res.data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function searcht(){return _ref2.apply(this,arguments);};}();var set_vals=function set_vals(e){set_search_t(e);set_search_k(e);};var likes=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var res,sorted;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(search_tag.length!=0)){_context3.next=7;break;}_context3.next=3;return axios.get(\"/posts/searcht/\".concat(search_tag));case 3:res=_context3.sent;set_search_array(res);sorted=_toConsumableArray(search_array).sort(function(a,b){return b.totalLikes-a.totalLikes;});set_search_array(sorted);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function likes(){return _ref3.apply(this,arguments);};}();var dislikes=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var res,sorted;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(search_tag.length!=0)){_context4.next=7;break;}_context4.next=3;return axios.get(\"/posts/searcht/\".concat(search_tag));case 3:res=_context4.sent;set_search_array(res);sorted=_toConsumableArray(search_array).sort(function(a,b){return b.totalDislikes-a.totalDislikes;});set_search_array(sorted);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function dislikes(){return _ref4.apply(this,arguments);};}();var engagement=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var res,sorted;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(search_tag.length!=0)){_context5.next=7;break;}_context5.next=3;return axios.get(\"/posts/searcht/\".concat(search_tag));case 3:res=_context5.sent;set_search_array(res);sorted=_toConsumableArray(search_array).sort(function(a,b){return b.totalComments-a.totalComments;});set_search_array(sorted);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function engagement(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"home container-bg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"SearchInput\",onChange:function onChange(e){return set_vals(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"s1\",onClick:function onClick(){return searchk();},children:\" Search keyword\"}),/*#__PURE__*/_jsx(\"button\",{className:\"s1\",onClick:function onClick(){return searcht();},children:\" Search tag\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"s2\",onClick:function onClick(){return likes();},children:\" sort by likes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"s2\",onClick:function onClick(){return dislikes();},children:\" sort by dislikes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"s2\",onClick:function onClick(){return engagement();},children:\" sort by engagement\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:search_array.map(function(result){return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/post/\".concat(result.post_id),children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"title\",children:[result.writer_id,\" \"]}),/*#__PURE__*/_jsx(\"p\",{className:\"content\",children:getText(result.post_content)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDC4D\",result.totalLikes,\" \\uD83D\\uDC4E\",result.totalDislikes,\" \\uD83D\\uDCAD\",result.totalComments]}),/*#__PURE__*/_jsxs(\"p\",{className:\"tag\",children:[result.tag2,\" \",result.tag3]})]})]})})});})})})]});};export default Search;","map":{"version":3,"names":["React","useState","Link","useNavigate","axios","Search","search_word","set_search_k","search_array","set_search_array","search_tag","set_search_t","order","set_sorting_by","navigate","getText","html","doc","DOMParser","parseFromString","body","textContent","searchk","console","log","length","get","res","data","searcht","set_vals","e","likes","sorted","sort","a","b","totalLikes","dislikes","totalDislikes","engagement","totalComments","target","value","map","result","post_id","writer_id","post_content","tag2","tag3"],"sources":["C:/Users/musta/Documents/GitHub/guest_posting/client/src/pages/search.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst Search = () => {\r\n    \r\n    const [search_word , set_search_k] = useState([])\r\n    const [search_array , set_search_array ] = useState([])\r\n    const [search_tag , set_search_t] = useState([])\r\n    const [order , set_sorting_by ] = useState([])\r\n    const navigate = useNavigate();\r\n    \r\n\r\n    const getText = (html) =>{\r\n    const doc = new DOMParser().parseFromString(html, \"text/html\")\r\n    return doc.body.textContent\r\n    }\r\n\r\n    const searchk = async() => {\r\n        console.log(\"THE words are : \", search_word)\r\n        if (search_word.length != 0){\r\n            try {\r\n            const res = await axios.get(`/posts/searchk/${search_word}`);\r\n            set_search_array(res.data)\r\n            } catch (err){\r\n            console.log(err)\r\n            }\r\n        }\r\n    }\r\n\r\n    const searcht = async() => {\r\n        if (search_tag.length != 0){\r\n        console.log(\"THE tags are : \", search_tag)\r\n        try {\r\n        const res = await axios.get(`/posts/searcht/${search_tag}`);\r\n        set_search_array(res.data)\r\n        } catch (err){\r\n          console.log(err)\r\n        }\r\n    }\r\n    }\r\n\r\n    const set_vals = (e) => {\r\n        set_search_t(e);\r\n        set_search_k(e);\r\n    }\r\n\r\n    const likes = async() => {\r\n        if (search_tag.length != 0){\r\n        const res = await axios.get(`/posts/searcht/${search_tag}`);\r\n        set_search_array(res)\r\n        const sorted = [...search_array].sort((a,b) => b.totalLikes - a.totalLikes)\r\n        set_search_array(sorted)\r\n        }\r\n    }\r\n\r\n    const dislikes = async() => {\r\n        if (search_tag.length != 0){\r\n        const res = await axios.get(`/posts/searcht/${search_tag}`);\r\n        set_search_array(res)\r\n        const sorted = [...search_array].sort((a,b) => b.totalDislikes - a.totalDislikes)\r\n        set_search_array(sorted)\r\n        }\r\n    }\r\n\r\n\r\n    const engagement = async() => {\r\n        if (search_tag.length != 0){\r\n        const res = await axios.get(`/posts/searcht/${search_tag}`);\r\n        set_search_array(res)\r\n        const sorted = [...search_array].sort((a,b) => b.totalComments - a.totalComments)\r\n        set_search_array(sorted)\r\n        }\r\n    }\r\n\r\n      \r\n    return (\r\n        <div className=\"home container-bg\">   \r\n            <div className=\"search\">\r\n                <h1>Search</h1>\r\n                <div>\r\n                <input className=\"SearchInput\" onChange={(e) => set_vals(e.target.value)}></input>\r\n                <button className=\"s1\" onClick = {() => searchk()}> Search keyword</button>\r\n                <button className=\"s1\" onClick = {() => searcht()}> Search tag</button>\r\n                </div>\r\n                <button className=\"s2\" onClick = {() => likes()}> sort by likes</button>\r\n                <button className=\"s2\" onClick = {() => dislikes()}> sort by dislikes</button>\r\n                <button className=\"s2\" onClick = {() => engagement()}> sort by engagement</button>\r\n            </div>\r\n            <div>\r\n            <div className=\"posts\">\r\n                {search_array.map((result) => ( \r\n                <div className=\"post\">\r\n                    <div className=\"content\">\r\n                        <Link className=\"link\" to={`/post/${result.post_id}`}>\r\n                            <h2 className=\"title\">{result.writer_id} </h2>\r\n                            <p className=\"content\">{getText(result.post_content)}</p>\r\n                            <div>\r\n                                <p>👍{result.totalLikes} 👎{result.totalDislikes} 💭{result.totalComments}</p>\r\n                                <p className=\"tag\">{result.tag2} {result.tag3}</p>\r\n                            </div>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n            </div>\r\n        </div>\r\n        </div> \r\n    );\r\n\r\n};\r\n\r\nexport default Search;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}