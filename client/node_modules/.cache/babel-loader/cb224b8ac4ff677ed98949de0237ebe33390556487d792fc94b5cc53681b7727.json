{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();export var AuthContexProvider=function AuthContexProvider(_ref){var children=_ref.children;var _useState=useState(JSON.parse(localStorage.getItem(\"user\"))||null),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var admin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(inputs){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"/auth/admin\",inputs);case 2:res=_context.sent;console.log(\"authcontext.js:\",res.data);setCurrentUser(res.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function admin(_x){return _ref2.apply(this,arguments);};}();var login=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(inputs){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"/auth/login\",inputs);case 2:res=_context2.sent;setCurrentUser(res.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function login(_x2){return _ref3.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(inputs){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(\"/auth/logout\");case 2:setCurrentUser(null);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function logout(_x3){return _ref4.apply(this,arguments);};}();useEffect(function(){localStorage.setItem(\"user\",JSON.stringify(currentUser));},[currentUser]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{currentUser:currentUser,login:login,logout:logout,admin:admin},children:children});};","map":{"version":3,"names":["axios","createContext","useEffect","useState","AuthContext","AuthContexProvider","children","JSON","parse","localStorage","getItem","currentUser","setCurrentUser","admin","inputs","post","res","console","log","data","login","logout","setItem","stringify"],"sources":["C:/Users/musta/Documents/GitHub/guest_posting/client/src/context/authContext.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { createContext, useEffect, useState } from \"react\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthContexProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(\r\n    JSON.parse(localStorage.getItem(\"user\")) || null\r\n  );\r\n\r\n  const admin = async (inputs) => {\r\n    const res = await axios.post(\"/auth/admin\", inputs);\r\n    console.log(\"authcontext.js:\",res.data)\r\n    setCurrentUser(res.data);\r\n  };\r\n\r\n  const login = async (inputs) => {\r\n    const res = await axios.post(\"/auth/login\", inputs);\r\n    setCurrentUser(res.data);\r\n  };\r\n\r\n  const logout = async (inputs) => {\r\n    await axios.post(\"/auth/logout\");\r\n    setCurrentUser(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"user\", JSON.stringify(currentUser));\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ currentUser, login, logout, admin }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}"],"mappings":"8aAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,aAAa,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,2CAE3D,MAAO,IAAMC,YAAW,cAAGH,aAAa,EAAE,CAE1C,MAAO,IAAMI,mBAAkB,CAAG,QAArBA,mBAAkB,MAAqB,IAAfC,SAAQ,MAARA,QAAQ,CAC3C,cAAsCH,QAAQ,CAC5CI,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAI,IAAI,CACjD,wCAFMC,WAAW,eAAEC,cAAc,eAIlC,GAAMC,MAAK,6FAAG,iBAAOC,MAAM,kJACPd,MAAK,CAACe,IAAI,CAAC,aAAa,CAAED,MAAM,CAAC,QAA7CE,GAAG,eACTC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAACF,GAAG,CAACG,IAAI,CAAC,CACvCP,cAAc,CAACI,GAAG,CAACG,IAAI,CAAC,CAAC,sDAC1B,kBAJKN,MAAK,6CAIV,CAED,GAAMO,MAAK,6FAAG,kBAAON,MAAM,uJACPd,MAAK,CAACe,IAAI,CAAC,aAAa,CAAED,MAAM,CAAC,QAA7CE,GAAG,gBACTJ,cAAc,CAACI,GAAG,CAACG,IAAI,CAAC,CAAC,wDAC1B,kBAHKC,MAAK,8CAGV,CAED,GAAMC,OAAM,6FAAG,kBAAOP,MAAM,+IACpBd,MAAK,CAACe,IAAI,CAAC,cAAc,CAAC,QAChCH,cAAc,CAAC,IAAI,CAAC,CAAC,wDACtB,kBAHKS,OAAM,8CAGX,CAEDnB,SAAS,CAAC,UAAM,CACdO,YAAY,CAACa,OAAO,CAAC,MAAM,CAAEf,IAAI,CAACgB,SAAS,CAACZ,WAAW,CAAC,CAAC,CAC3D,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB,mBACE,KAAC,WAAW,CAAC,QAAQ,EAAC,KAAK,CAAE,CAAEA,WAAW,CAAXA,WAAW,CAAES,KAAK,CAALA,KAAK,CAAEC,MAAM,CAANA,MAAM,CAAER,KAAK,CAALA,KAAM,CAAE,UAChEP,QAAQ,EACY,CAE3B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}