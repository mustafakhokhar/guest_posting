{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/musta/Documents/GitHub/guest_posting/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Edit from\"../img/edit.png\";import Delete from\"../img/delete.png\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import axios from\"axios\";import moment from\"moment\";import{useContext}from\"react\";import{AuthContext}from\"../context/authContext\";import DOMPurify from\"dompurify\";import Comments from\"./comments\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SingleAdmin=function SingleAdmin(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var location=useLocation();var navigate=useNavigate();var postId=location.pathname.split(\"/\")[2];var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),approval_status=_useState4[0],set_approval_status=_useState4[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/postsApproval/\".concat(postId));case 3:res=_context.sent;setPost(res.data);set_approval_status(res.data.admin_approval_status);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"Error:\",_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[post]);var navigateBack=function navigateBack(){// 👇️ navigate to /Login\nnavigate(-1);};var approval_handler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(post){var post_array,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;// post.totalLikes = post.totalLikes + 1\npost_array=[post,currentUser];console.log(\"FUCKIng\");navigateBack();_context2.next=6;return axios.post(\"/postsApproval/updateApprovalStatus\",post_array);case 6:res=_context2.sent;console.log(\"POSTTT:\",post);console.log(\"RESSS:\",res.data);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function approval_handler(_x){return _ref2.apply(this,arguments);};}();var getText=function getText(html){var doc=new DOMParser().parseFromString(html,\"text/html\");return doc.body.textContent;};return/*#__PURE__*/_jsx(\"div\",{className:\"single\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"repo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"userSingle\",children:/*#__PURE__*/_jsx(\"span\",{children:post.writer_id})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"postContent\",dangerouslySetInnerHTML:{__html:DOMPurify.sanitize(post.post_content)}}),/*#__PURE__*/_jsxs(\"h1\",{className:\"tagsSingle\",children:[post.tag1,\"   \",post.tag2,\"   \",post.tag3]}),/*#__PURE__*/_jsx(\"div\",{className:\"buttonsSingle\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return approval_handler(post);},children:\" APPROVE \"})]})});};export default SingleAdmin;","map":{"version":3,"names":["React","useEffect","useState","Edit","Delete","Link","useLocation","useNavigate","axios","moment","useContext","AuthContext","DOMPurify","Comments","SingleAdmin","post","setPost","location","navigate","postId","pathname","split","currentUser","approval_status","set_approval_status","fetchData","get","res","data","admin_approval_status","console","log","navigateBack","approval_handler","post_array","getText","html","doc","DOMParser","parseFromString","body","textContent","writer_id","__html","sanitize","post_content","tag1","tag2","tag3"],"sources":["C:/Users/musta/Documents/GitHub/guest_posting/client/src/pages/SingleAdmin.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Edit from \"../img/edit.png\";\r\nimport Delete from \"../img/delete.png\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../context/authContext\";\r\nimport DOMPurify from \"dompurify\";\r\nimport Comments from \"./comments\";\r\n\r\n\r\n\r\nconst SingleAdmin = () => {\r\n  const [post, setPost] = useState({});\r\n\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const postId = location.pathname.split(\"/\")[2];\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  const [approval_status , set_approval_status] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await axios.get(`/postsApproval/${postId}`);\r\n        setPost(res.data);\r\n        set_approval_status(res.data.admin_approval_status)\r\n      } catch (err) {\r\n        console.log(\"Error:\",err);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [post]);\r\n\r\n  const navigateBack = () => {\r\n    // 👇️ navigate to /Login\r\n    navigate(-1);\r\n  };\r\n\r\n  const approval_handler = async(post) => {\r\n    try {\r\n      // post.totalLikes = post.totalLikes + 1\r\n      const post_array = [post , currentUser]\r\n      console.log(\"FUCKIng\")\r\n      navigateBack()\r\n      const res = await axios.post(`/postsApproval/updateApprovalStatus` , post_array);\r\n      console.log(\"POSTTT:\",post)\r\n      console.log(\"RESSS:\",res.data)\r\n    } catch (err){\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  const getText = (html) =>{\r\n    const doc = new DOMParser().parseFromString(html, \"text/html\")\r\n    return doc.body.textContent\r\n  }\r\n\r\n  return (\r\n    <div className=\"single\">\r\n      <div className=\"content\">\r\n        <div className=\"user\">\r\n          <div className=\"repo\">\r\n          </div>\r\n              <div className=\"userSingle\">\r\n                <span>{post.writer_id}</span>\r\n              </div>\r\n        </div>\r\n        \r\n        <p className=\"postContent\"\r\n          dangerouslySetInnerHTML={{\r\n            __html: DOMPurify.sanitize(post.post_content),\r\n          }}\r\n        ></p>\r\n        <h1 className=\"tagsSingle\">{post.tag1}   {post.tag2}   {post.tag3}</h1>\r\n        <div className=\"buttonsSingle\"></div>\r\n          <button onClick = {() => approval_handler(post)}> APPROVE </button>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleAdmin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}